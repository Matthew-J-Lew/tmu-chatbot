# Copy this file to .env and fill in your values.
# Never commit .env to Git.

# ---- LLM selection ----
# Use Azure OpenAI (recommended) or fall back to the local Ollama container.
LLM_PROVIDER=azure
# Optional: if the primary provider fails, try this provider once.
LLM_FALLBACK_PROVIDER=ollama

# ---- Azure OpenAI ----
# Endpoint + deployment match the Faculty of Arts Azure OpenAI resource.
AZURE_OPENAI_ENDPOINT=https://arts-chatbot-openai.openai.azure.com/
AZURE_OPENAI_DEPLOYMENT=gpt-4o-mini
AZURE_OPENAI_API_VERSION=2024-10-21
AZURE_OPENAI_API_KEY=REPLACE_ME

# Cost controls (recommended): keep max tokens <= 512 and temperature ~0.1
AZURE_OPENAI_MAX_TOKENS=512
AZURE_OPENAI_TEMPERATURE=0.1

# ---- CORS ----
# Comma-separated list of allowed origins for the web widget.
CORS_ALLOW_ORIGINS=https://www.torontomu.ca


# ---- Ingestion: JS-heavy pages ----
# Enable Playwright-based rendering during ingestion to handle accordion/dropdown/SPA pages.
INGEST_USE_PLAYWRIGHT=true
# If true, always use Playwright for HTML pages (slower, but most reliable).
INGEST_PLAYWRIGHT_ALWAYS=false
# If true, use Playwright when static fetch fails or extracts too little text.
INGEST_PLAYWRIGHT_FALLBACK=true
# Minimum extracted characters before we consider the page "too empty" and fallback to Playwright.
INGEST_MIN_EXTRACTED_CHARS=400
# Attempt to expand common accordions (buttons with aria-expanded=false, <details> tags) before extracting.
PLAYWRIGHT_EXPAND_ACCORDIONS=true
